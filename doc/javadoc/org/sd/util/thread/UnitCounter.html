<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_16) on Tue Nov 03 14:57:41 MST 2009 -->
<TITLE>
UnitCounter (JavaDOC for SD Toolkit)
</TITLE>

<META NAME="date" CONTENT="2009-11-03">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="UnitCounter (JavaDOC for SD Toolkit)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/sd/util/thread/TimeoutThread.html" title="class in org.sd.util.thread"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/sd/util/thread/UnitCounter.Status.html" title="enum in org.sd.util.thread"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/sd/util/thread/UnitCounter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="UnitCounter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.sd.util.thread</FONT>
<BR>
Class UnitCounter</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.sd.util.thread.UnitCounter</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>UnitCounter</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Container and communications medium for counting units of work.
 <p>
 The UnitCounter is intended to be used in long-running repetitive tasks as
 a means of communicating with another process (running in another thread).
 <p>
 The communication from the task using a counter includes progress toward
 completion while the communication to the task through the counter is for
 flow control. Specifically, for pausing, resuming, and/or terminating the
 task.
 <p>
 Usage:
 <pre>
   this.uc = new UnitCounter(toBeDone);  // note: provide an accessor for consumers to get this instance
   uc.markStartNow();
   while (iterating) {
     if (uc.isTimeToQuit()) {  // checks for die and waits for pause to resume
       //...;  // clean up for clean quit
       break;
     }

     //...;  // do unit processing; can send uc.die() down into stack for checking

     if (!uc.inc()) {  // inc will count, but will return false if time to die
       //...;  // clean up for clean quit
       break;
     }
   };
   uc.markEndNow();
 </pre>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Spence Koehler</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.Status.html" title="enum in org.sd.util.thread">UnitCounter.Status</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#UnitCounter()">UnitCounter</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct with an unknown number of units to be done.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#UnitCounter(long)">UnitCounter</A></B>(long&nbsp;toBeDone)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Construct with the number of units to be done.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.concurrent.atomic.AtomicBoolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#die()">die</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the handle to the AtomicBoolean that indicates that processing should
 terminate, tying up loose ends and providing partial results if possible.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#doneSoFar()">doneSoFar</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the number of units of work done so far.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getAverageTimePerUnit()">getAverageTimePerUnit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to compute the average time per unit.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getAverageTimePerUnit(long)">getAverageTimePerUnit</A></B>(long&nbsp;doneSoFar)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to compute the average time per unit.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getCompletionRatio()">getCompletionRatio</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the ratio of completion.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getEndTime()">getEndTime</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the end time.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getEstimatedRemainingTime()">getEstimatedRemainingTime</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to compute the estimated remaining time until completion.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getPercentComplete()">getPercentComplete</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to interpret the completion ratio and get the
 percentage of completion if available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getPercentComplete(long[])">getPercentComplete</A></B>(long[]&nbsp;completionRatio)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Convenience method to interpret the completion ratio and get the
 percentage of completion if available.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getStartTime()">getStartTime</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the start time.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/sd/util/thread/UnitCounter.Status.html" title="enum in org.sd.util.thread">UnitCounter.Status</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getStatus()">getStatus</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get this instance's current status.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getTime()">getTime</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the amount of time that the counter has been running.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#getTimeStalled()">getTimeStalled</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Heuristic to determine the amount of time a running process appears to
 have been stalled.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#hasEnded()">hasEnded</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determine whether this counter has ended (as indicated by an endTime
 having been set.)</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#inc()">inc</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Increment this counter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#inc(boolean)">inc</A></B>(boolean&nbsp;enforceCountLimit)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Increment this counter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#interrupted()">interrupted</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determine whether this counter is in an interrupted state.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#isPaused()">isPaused</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Determine whether this counter is paused.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#isTimeToQuit()">isTimeToQuit</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Check for die and wait for pause to resume.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#kill()">kill</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Send a signal to die through this instance.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#markEnd(long)">markEnd</A></B>(long&nbsp;endTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark the ending time as the given endTime.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#markEndNow()">markEndNow</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark the ending time as now.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#markStart(long)">markStart</A></B>(long&nbsp;startTime)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark the starting time as the given startTime.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#markStartNow()">markStartNow</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark the starting time as now.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#pause(long)">pause</A></B>(long&nbsp;checkInterval)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark counting as being paused and set the time to sleep between checking
 for resume to the given checkInterval.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../org/sd/util/thread/UnitCounter.html" title="class in org.sd.util.thread">UnitCounter</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#registerSubsidiary()">registerSubsidiary</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Create and start a subsidiary unit counter that is tied to this.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#resume()">resume</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Un-pause this counter.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#setToBeDone(long)">setToBeDone</A></B>(long&nbsp;toBeDone)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reset the number of units to be done.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#toBeDone()">toBeDone</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get the total number of units of work to be done.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/sd/util/thread/UnitCounter.html#toString()">toString</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Get a string representation of this instance.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="UnitCounter()"><!-- --></A><H3>
UnitCounter</H3>
<PRE>
public <B>UnitCounter</B>()</PRE>
<DL>
<DD>Construct with an unknown number of units to be done.
<P>
</DL>
<HR>

<A NAME="UnitCounter(long)"><!-- --></A><H3>
UnitCounter</H3>
<PRE>
public <B>UnitCounter</B>(long&nbsp;toBeDone)</PRE>
<DL>
<DD>Construct with the number of units to be done.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>toBeDone</CODE> - the number of units to be done (-1 if unknown.)</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getStatus()"><!-- --></A><H3>
getStatus</H3>
<PRE>
public <A HREF="../../../../org/sd/util/thread/UnitCounter.Status.html" title="enum in org.sd.util.thread">UnitCounter.Status</A> <B>getStatus</B>()</PRE>
<DL>
<DD>Get this instance's current status.
 <ul>
 <li>IDLE -- Waiting to be started.</li>
 <li>RUNNING -- Actively processing.</li>
 <li>PAUSED -- Has been started but is currently paused.</li>
 <li>KILLED -- Has been killed.</li>
 <li>DONE -- Has run to completion and is finished.</li>
 </ul>
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="toBeDone()"><!-- --></A><H3>
toBeDone</H3>
<PRE>
public long <B>toBeDone</B>()</PRE>
<DL>
<DD>Get the total number of units of work to be done.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the total number of units of work to be done or -1 if unknown.</DL>
</DD>
</DL>
<HR>

<A NAME="setToBeDone(long)"><!-- --></A><H3>
setToBeDone</H3>
<PRE>
public void <B>setToBeDone</B>(long&nbsp;toBeDone)</PRE>
<DL>
<DD>Reset the number of units to be done.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="doneSoFar()"><!-- --></A><H3>
doneSoFar</H3>
<PRE>
public long <B>doneSoFar</B>()</PRE>
<DL>
<DD>Get the number of units of work done so far.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the total number of units of work done so far or -1 if counting has not been started.</DL>
</DD>
</DL>
<HR>

<A NAME="markStartNow()"><!-- --></A><H3>
markStartNow</H3>
<PRE>
public void <B>markStartNow</B>()</PRE>
<DL>
<DD>Mark the starting time as now.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="markStart(long)"><!-- --></A><H3>
markStart</H3>
<PRE>
public void <B>markStart</B>(long&nbsp;startTime)</PRE>
<DL>
<DD>Mark the starting time as the given startTime.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getStartTime()"><!-- --></A><H3>
getStartTime</H3>
<PRE>
public long <B>getStartTime</B>()</PRE>
<DL>
<DD>Get the start time.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the startTime or -1 if it has not been set.</DL>
</DD>
</DL>
<HR>

<A NAME="getTime()"><!-- --></A><H3>
getTime</H3>
<PRE>
public long <B>getTime</B>()</PRE>
<DL>
<DD>Get the amount of time that the counter has been running.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="markEndNow()"><!-- --></A><H3>
markEndNow</H3>
<PRE>
public void <B>markEndNow</B>()</PRE>
<DL>
<DD>Mark the ending time as now.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="markEnd(long)"><!-- --></A><H3>
markEnd</H3>
<PRE>
public void <B>markEnd</B>(long&nbsp;endTime)</PRE>
<DL>
<DD>Mark the ending time as the given endTime.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getEndTime()"><!-- --></A><H3>
getEndTime</H3>
<PRE>
public long <B>getEndTime</B>()</PRE>
<DL>
<DD>Get the end time.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the endTime or -1 if it has not been set.</DL>
</DD>
</DL>
<HR>

<A NAME="hasEnded()"><!-- --></A><H3>
hasEnded</H3>
<PRE>
public boolean <B>hasEnded</B>()</PRE>
<DL>
<DD>Determine whether this counter has ended (as indicated by an endTime
 having been set.)
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="inc()"><!-- --></A><H3>
inc</H3>
<PRE>
public boolean <B>inc</B>()</PRE>
<DL>
<DD>Increment this counter.
 <p>
 Note that a counter is not thread-safe. It is assumed to be counting the
 units of work performed in a single thread!
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="inc(boolean)"><!-- --></A><H3>
inc</H3>
<PRE>
public boolean <B>inc</B>(boolean&nbsp;enforceCountLimit)</PRE>
<DL>
<DD>Increment this counter.
 <p>
 Note that a counter is not thread-safe. It is assumed to be counting the
 units of work performed in a single thread!
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="pause(long)"><!-- --></A><H3>
pause</H3>
<PRE>
public void <B>pause</B>(long&nbsp;checkInterval)</PRE>
<DL>
<DD>Mark counting as being paused and set the time to sleep between checking
 for resume to the given checkInterval.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isPaused()"><!-- --></A><H3>
isPaused</H3>
<PRE>
public boolean <B>isPaused</B>()</PRE>
<DL>
<DD>Determine whether this counter is paused.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="interrupted()"><!-- --></A><H3>
interrupted</H3>
<PRE>
public boolean <B>interrupted</B>()</PRE>
<DL>
<DD>Determine whether this counter is in an interrupted state.
 <p>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if this counter has been paused or killed; otherwise, false.</DL>
</DD>
</DL>
<HR>

<A NAME="isTimeToQuit()"><!-- --></A><H3>
isTimeToQuit</H3>
<PRE>
public boolean <B>isTimeToQuit</B>()</PRE>
<DL>
<DD>Check for die and wait for pause to resume.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="resume()"><!-- --></A><H3>
resume</H3>
<PRE>
public void <B>resume</B>()</PRE>
<DL>
<DD>Un-pause this counter.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="die()"><!-- --></A><H3>
die</H3>
<PRE>
public java.util.concurrent.atomic.AtomicBoolean <B>die</B>()</PRE>
<DL>
<DD>Get the handle to the AtomicBoolean that indicates that processing should
 terminate, tying up loose ends and providing partial results if possible.
 <p>
 Consumers should monitor (and/or set) this variable.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="kill()"><!-- --></A><H3>
kill</H3>
<PRE>
public void <B>kill</B>()</PRE>
<DL>
<DD>Send a signal to die through this instance.
 <p>
 NOTE: This simply sets the die flag to true.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getCompletionRatio()"><!-- --></A><H3>
getCompletionRatio</H3>
<PRE>
public long[] <B>getCompletionRatio</B>()</PRE>
<DL>
<DD>Get the ratio of completion.
 <ul>
 <li>doneSoFar -- the total number of units of work done so far or -1 if
                  counting has not been started.</li>
 <li>toBeDone -- the total number of units of work to be done or -1 if
                 unknown.</li>
 </ul>
<P>
<DD><DL>

<DT><B>Returns:</B><DD>{doneSoFar, toBeDone}</DL>
</DD>
</DL>
<HR>

<A NAME="getPercentComplete()"><!-- --></A><H3>
getPercentComplete</H3>
<PRE>
public double <B>getPercentComplete</B>()</PRE>
<DL>
<DD>Convenience method to interpret the completion ratio and get the
 percentage of completion if available.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>-1 if not started, -2 if unknown, or the current percentage.</DL>
</DD>
</DL>
<HR>

<A NAME="getPercentComplete(long[])"><!-- --></A><H3>
getPercentComplete</H3>
<PRE>
public double <B>getPercentComplete</B>(long[]&nbsp;completionRatio)</PRE>
<DL>
<DD>Convenience method to interpret the completion ratio and get the
 percentage of completion if available.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>-1 if not started, -2 if unknown, or the current percentage.</DL>
</DD>
</DL>
<HR>

<A NAME="getAverageTimePerUnit()"><!-- --></A><H3>
getAverageTimePerUnit</H3>
<PRE>
public double <B>getAverageTimePerUnit</B>()</PRE>
<DL>
<DD>Convenience method to compute the average time per unit.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the average time per unit or -1 if the process has not been started.</DL>
</DD>
</DL>
<HR>

<A NAME="getAverageTimePerUnit(long)"><!-- --></A><H3>
getAverageTimePerUnit</H3>
<PRE>
public double <B>getAverageTimePerUnit</B>(long&nbsp;doneSoFar)</PRE>
<DL>
<DD>Convenience method to compute the average time per unit.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the average time per unit or -1 if the process has not been started.</DL>
</DD>
</DL>
<HR>

<A NAME="getEstimatedRemainingTime()"><!-- --></A><H3>
getEstimatedRemainingTime</H3>
<PRE>
public long <B>getEstimatedRemainingTime</B>()</PRE>
<DL>
<DD>Convenience method to compute the estimated remaining time until completion.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the estimated remaining time or -1 if not started or -2 if toBeDone is unknown.</DL>
</DD>
</DL>
<HR>

<A NAME="getTimeStalled()"><!-- --></A><H3>
getTimeStalled</H3>
<PRE>
public long <B>getTimeStalled</B>()</PRE>
<DL>
<DD>Heuristic to determine the amount of time a running process appears to
 have been stalled. It assumes that each unit of work would take the same
 amount of time (on average). It returns the time since the last increment
 that exceeds 2 standard deviations larger than the mean time per unit
 so far.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>an estimate for the time stalled or 0 if there is no apparent stall.</DL>
</DD>
</DL>
<HR>

<A NAME="registerSubsidiary()"><!-- --></A><H3>
registerSubsidiary</H3>
<PRE>
public <A HREF="../../../../org/sd/util/thread/UnitCounter.html" title="class in org.sd.util.thread">UnitCounter</A> <B>registerSubsidiary</B>()</PRE>
<DL>
<DD>Create and start a subsidiary unit counter that is tied to this.
 <p>
 A subsidiary counter maintains its own times and counts, but pauses
 and dies along with this counter (and vice versa).
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="toString()"><!-- --></A><H3>
toString</H3>
<PRE>
public java.lang.String <B>toString</B>()</PRE>
<DL>
<DD>Get a string representation of this instance.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>toString</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/sd/util/thread/TimeoutThread.html" title="class in org.sd.util.thread"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/sd/util/thread/UnitCounter.Status.html" title="enum in org.sd.util.thread"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/sd/util/thread/UnitCounter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="UnitCounter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
